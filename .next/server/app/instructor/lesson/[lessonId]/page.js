(()=>{var e={};e.id=1586,e.ids=[1586],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},505:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=t(67096),i=t(16132),a=t(37284),n=t.n(a),l=t(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["instructor",{children:["lesson",{children:["[lessonId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,80247)),"C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\lesson\\[lessonId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\lesson\\[lessonId]\\page.tsx"],x="/instructor/lesson/[lessonId]/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/instructor/lesson/[lessonId]/page",pathname:"/instructor/lesson/[lessonId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},72958:(e,s,t)=>{Promise.resolve().then(t.bind(t,79317))},79317:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>InstructorLessonDetailPage});var r=t(30784),i=t(9885),a=t(57114),n=t(74284),l=t(7152),o=t(93935),c=t(79803),d=t(15441),x=t(39546),m=t(1626),u=t(92032),h=t(51831),p=t(91672),g=t(48973),b=t(22385),j=t(62118),f=t(59494),y=t(26303),N=t(56206),v=t(52995),w=t(11440),q=t.n(w);function InstructorLessonDetailPage(){let e=(0,a.useParams)();(0,a.useRouter)();let{data:s}=(0,n.useSession)(),t=e.lessonId,[w,C]=(0,i.useState)(null),[E,k]=(0,i.useState)(!0),[A,Z]=(0,i.useState)(""),[Q,P]=(0,i.useState)(""),[z,_]=(0,i.useState)("overview"),[I,T]=(0,i.useState)([]),[S,L]=(0,i.useState)(!1),[O,$]=(0,i.useState)(null),[D,U]=(0,i.useState)({title:"",description:"",maxPoints:16,rubricId:""}),[R,G]=(0,i.useState)(!1),[F,M]=(0,i.useState)(null),[J,B]=(0,i.useState)({question:"",options:["",""],correctAnswer:0,explanation:"",order:0});(0,i.useEffect)(()=>{t&&(fetchLesson(),fetchRubrics())},[t]);let fetchLesson=async()=>{try{k(!0);let e=await fetch(`/api/lessons/${t}`);if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to fetch lesson")}let s=await e.json();C(s.lesson)}catch(e){Z(e.message)}finally{k(!1)}},fetchRubrics=async()=>{try{let e=await fetch("/api/rubrics");if(e.ok){let s=await e.json();T(s.rubrics||[])}}catch(e){console.error("Error fetching rubrics:",e)}},handleAddExercise=async()=>{if(!D.title||!D.rubricId){Z("Title and rubric are required");return}try{Z("");let e=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...D,lessonId:t})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create exercise")}await fetchLesson(),U({title:"",description:"",maxPoints:16,rubricId:""}),L(!1),P("Exercise added successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},handleUpdateExercise=async()=>{if(!O||!O.title||!O.rubric.id){Z("Title and rubric are required");return}try{Z("");let e=await fetch(`/api/exercises/${O.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:O.title,description:O.description,maxPoints:O.maxPoints,rubricId:O.rubric.id})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update exercise")}await fetchLesson(),$(null),P("Exercise updated successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},handleDeleteExercise=async e=>{if(confirm("Are you sure you want to delete this exercise? This action cannot be undone."))try{Z("");let s=await fetch(`/api/exercises/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete exercise")}await fetchLesson(),P("Exercise deleted successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},handleAddQuestion=async()=>{if(!J.question||J.options.length<2){Z("Question and at least 2 options are required");return}if(J.options.some(e=>!e.trim())){Z("All options must be filled");return}try{Z("");let e=await fetch("/api/quizzes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...J,lessonId:t,options:J.options.filter(e=>e.trim())})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create quiz question")}await fetchLesson(),B({question:"",options:["",""],correctAnswer:0,explanation:"",order:0}),G(!1),P("Quiz question added successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},handleUpdateQuestion=async()=>{if(!F||!F.question||F.options.length<2){Z("Question and at least 2 options are required");return}try{Z("");let e=await fetch(`/api/quizzes/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:F.question,options:F.options.filter(e=>e.trim()),correctAnswer:F.correctAnswer,explanation:F.explanation||null,order:F.order})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update quiz question")}await fetchLesson(),M(null),P("Quiz question updated successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},handleDeleteQuestion=async e=>{if(confirm("Are you sure you want to delete this quiz question? This action cannot be undone."))try{Z("");let s=await fetch(`/api/quizzes/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete quiz question")}await fetchLesson(),P("Quiz question deleted successfully"),setTimeout(()=>P(null),3e3)}catch(e){Z(e.message)}},removeOption=e=>{let s=F||J;if(s.options.length<=2){Z("At least 2 options are required");return}if(F){let s=F.options.filter((s,t)=>t!==e);M({...F,options:s,correctAnswer:F.correctAnswer>=s.length?0:F.correctAnswer})}else{let s=J.options.filter((s,t)=>t!==e);B({...J,options:s,correctAnswer:J.correctAnswer>=s.length?0:J.correctAnswer})}},updateOption=(e,s)=>{if(F){let t=[...F.options];t[e]=s,M({...F,options:t})}else{let t=[...J.options];t[e]=s,B({...J,options:t})}};return E?r.jsx(l.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]})}):w?r.jsx(l.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(q(),{href:`/instructor/courses/${w.courseId}`,className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Back to Course"]}),r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["Lesson ",w.number,": ",w.title]}),r.jsx(q(),{href:`/instructor/courses/${w.courseId}`,className:"text-sm text-blue-600 hover:text-blue-700",children:w.course.title})]}),w.description&&r.jsx("p",{className:"text-gray-600 mt-2",children:w.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[w.duration&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.Z,{className:"h-4 w-4 mr-1"}),w.duration]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),w.stats.exerciseCount," exercises"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-1"}),w.stats.quizQuestionCount," quiz questions"]})]})]})})]}),Q&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center",children:[r.jsx(u.Z,{className:"h-5 w-5 mr-2"}),Q]}),A&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center",children:[r.jsx(h.Z,{className:"h-5 w-5 mr-2"}),A]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(x.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:w.stats.exerciseCount}),r.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Exercises"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(m.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:w.stats.quizQuestionCount}),r.jsx("div",{className:"text-green-100 text-sm mt-1",children:"Quiz Questions"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(p.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:w.stats.quizAttemptCount}),r.jsx("div",{className:"text-purple-100 text-sm mt-1",children:"Quiz Attempts"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(g.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:w.stats.gradeCount}),r.jsx("div",{className:"text-orange-100 text-sm mt-1",children:"Grades Given"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>_("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"overview"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),(0,r.jsxs)("button",{onClick:()=>_("exercises"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"exercises"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Exercises (",w.exercises.length,")"]}),(0,r.jsxs)("button",{onClick:()=>_("quiz"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"quiz"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Quiz Questions (",w.quizQuestions.length,")"]})]})}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===z&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Lesson Information"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Lesson Number:"}),r.jsx("span",{className:"font-medium text-gray-900",children:w.number})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Title:"}),r.jsx("span",{className:"font-medium text-gray-900",children:w.title})]}),w.description&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Description:"}),r.jsx("span",{className:"font-medium text-gray-900 text-right max-w-md",children:w.description})]}),w.duration&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Duration:"}),r.jsx("span",{className:"font-medium text-gray-900",children:w.duration})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Course:"}),r.jsx(q(),{href:`/instructor/courses/${w.courseId}`,className:"font-medium text-blue-600 hover:text-blue-700",children:w.course.title})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Created:"}),r.jsx("span",{className:"font-medium text-gray-900",children:new Date(w.createdAt).toLocaleDateString()})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(q(),{href:`/instructor/lesson/${t}/notes`,className:"flex items-center p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:[r.jsx(x.Z,{className:"h-5 w-5 text-blue-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Manage Notes"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Edit lesson notes and content"})]})]}),(0,r.jsxs)("button",{onClick:()=>_("exercises"),className:"flex items-center p-4 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 transition-colors text-left w-full",children:[r.jsx(g.Z,{className:"h-5 w-5 text-green-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Grade Exercises"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Review and grade student submissions"})]})]})]})]})]}),"exercises"===z&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exercises"}),(0,r.jsxs)("button",{onClick:()=>{U({title:"",description:"",maxPoints:16,rubricId:""}),L(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Add Exercise"]})]}),0===w.exercises.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Exercises"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"This lesson doesn't have any exercises yet."}),(0,r.jsxs)("button",{onClick:()=>{U({title:"",description:"",maxPoints:16,rubricId:""}),L(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Add Exercise"]})]}):w.exercises.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(x.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-1"}),e.maxPoints," points"]}),(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-1"}),e.submissionCount," submissions"]}),(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-1"}),e.gradeCount," graded"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsxs)(q(),{href:`/instructor/exercise/${e.id}/grade`,className:"text-green-600 hover:text-green-700 font-medium text-sm flex items-center px-3 py-1.5 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Grade Exercise",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-1"}),"Grade"]}),r.jsx("button",{onClick:()=>$(e),className:"text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(f.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>handleDeleteExercise(e.id),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(y.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Rubric: ",e.rubric.name]}),(0,r.jsxs)(q(),{href:`/instructor/rubric/${e.rubric.id}/edit`,className:"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center",children:[r.jsx(f.Z,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),e.rubric.description&&r.jsx("p",{className:"text-xs text-gray-600 mb-3",children:e.rubric.description}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.rubric.criteria.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[r.jsx("div",{className:"text-xs font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:["Weight: ",e.weight,"%"]})]},e.id))})]})]},e.id))]}),"quiz"===z&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quiz Questions"}),(0,r.jsxs)("button",{onClick:()=>{B({question:"",options:["",""],correctAnswer:0,explanation:"",order:w.quizQuestions.length}),G(!0)},className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),0===w.quizQuestions.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Quiz Questions"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"This lesson doesn't have any quiz questions yet."}),(0,r.jsxs)("button",{onClick:()=>{B({question:"",options:["",""],correctAnswer:0,explanation:"",order:0}),G(!0)},className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}):w.quizQuestions.map((e,s)=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-purple-300 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:r.jsx(m.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["Question ",s+1]}),e.order>0&&(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:["(Order: ",e.order,")"]})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-1",children:e.question})]})]}),r.jsx("div",{className:"ml-11 space-y-2",children:e.options.map((s,t)=>r.jsx("div",{className:`p-3 rounded-lg border-2 ${t===e.correctAnswer?"border-green-300 bg-green-50":"border-gray-200 bg-white"}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[t===e.correctAnswer&&r.jsx(u.Z,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-sm text-gray-900",children:s}),t===e.correctAnswer&&r.jsx("span",{className:"ml-auto text-xs font-medium text-green-600",children:"Correct Answer"})]})},t))}),e.explanation&&(0,r.jsxs)("div",{className:"ml-11 mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"Explanation:"}),r.jsx("div",{className:"text-sm text-blue-800",children:e.explanation})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("button",{onClick:()=>M(e),className:"text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(f.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>handleDeleteQuestion(e.id),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(y.Z,{className:"h-4 w-4"})})]})]})},e.id))]})]})]}),(S||O)&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:O?"Edit Exercise":"Add New Exercise"}),r.jsx("button",{onClick:()=>{L(!1),$(null)},className:"text-gray-400 hover:text-gray-600",children:r.jsx(N.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:O?.title||D.title,onChange:e=>O?$({...O,title:e.target.value}):U({...D,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:O?.description||D.description,onChange:e=>O?$({...O,description:e.target.value}):U({...D,description:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Points"}),r.jsx("input",{type:"number",value:O?.maxPoints||D.maxPoints,onChange:e=>O?$({...O,maxPoints:parseInt(e.target.value)||16}):U({...D,maxPoints:parseInt(e.target.value)||16}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rubric ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{value:O?.rubric.id||D.rubricId,onChange:e=>O?$({...O,rubric:I.find(s=>s.id===e.target.value)||O.rubric}):U({...D,rubricId:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select Rubric"}),I.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.totalPoints," points)"]},e.id))]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsxs)("button",{onClick:O?handleUpdateExercise:handleAddExercise,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[r.jsx(v.Z,{className:"h-5 w-5 mr-2"}),O?"Update Exercise":"Add Exercise"]}),r.jsx("button",{onClick:()=>{L(!1),$(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}),(R||F)&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:F?"Edit Quiz Question":"Add New Quiz Question"}),r.jsx("button",{onClick:()=>{G(!1),M(null)},className:"text-gray-400 hover:text-gray-600",children:r.jsx(N.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:F?.question||J.question,onChange:e=>F?M({...F,question:e.target.value}):B({...J,question:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your question here...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Options ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("button",{type:"button",onClick:()=>{F?M({...F,options:[...F.options,""]}):B({...J,options:[...J.options,""]})},className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"+ Add Option"})]}),r.jsx("div",{className:"space-y-2",children:(F?.options||J.options).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"correctAnswer",checked:(F?.correctAnswer??J.correctAnswer)===s,onChange:()=>F?M({...F,correctAnswer:s}):B({...J,correctAnswer:s}),className:"h-4 w-4 text-purple-600 focus:ring-purple-500"}),r.jsx("input",{type:"text",value:e,onChange:e=>updateOption(s,e.target.value),placeholder:`Option ${s+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(F?.options||J.options).length>2&&r.jsx("button",{type:"button",onClick:()=>removeOption(s),className:"text-red-600 hover:text-red-700 p-2",children:r.jsx(N.Z,{className:"h-4 w-4"})})]},s))}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select the radio button next to the correct answer"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explanation (Optional)"}),r.jsx("textarea",{value:F?.explanation||J.explanation,onChange:e=>F?M({...F,explanation:e.target.value}):B({...J,explanation:e.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Explain why this is the correct answer..."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order (Optional)"}),r.jsx("input",{type:"number",value:F?.order??J.order,onChange:e=>F?M({...F,order:parseInt(e.target.value)||0}):B({...J,order:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"0"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first. Leave as 0 for auto-ordering."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsxs)("button",{onClick:F?handleUpdateQuestion:handleAddQuestion,className:"flex-1 flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:[r.jsx(v.Z,{className:"h-5 w-5 mr-2"}),F?"Update Question":"Add Question"]}),r.jsx("button",{onClick:()=>{G(!1),M(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})})]})]})}):r.jsx(l.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:A||"Lesson not found"})})]})})}},80247:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var r=t(95153);let i=(0,r.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\instructor\lesson\[lessonId]\page.tsx`),{__esModule:a,$$typeof:n}=i,l=i.default,o=l}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,9045,1440,3528,8200,986,7309,1012,7134,3935,7152],()=>__webpack_exec__(505));module.exports=t})();