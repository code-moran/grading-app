(()=>{var e={};e.id=8169,e.ids=[8169],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},40621:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(67096),a=t(16132),l=t(37284),i=t.n(l),d=t(32564),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["instructor",{children:["students",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34815)),"C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\students\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"C:\\Users\\admin\\projects\\grading-app\\app\\not-found.tsx"]}],o=["C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\students\\page.tsx"],x="/instructor/students/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/instructor/students/page",pathname:"/instructor/students",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},95527:(e,s,t)=>{Promise.resolve().then(t.bind(t,16285))},16285:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>InstructorStudentsPage});var r=t(30784),a=t(9885),l=t(74284),i=t(7152),d=t(93935),n=t(91672),c=t(35256),o=t(39546),x=t(48973),m=t(69518),u=t(12029),g=t(59490),h=t(28626),p=t(78937),j=t(56206);function InstructorStudentsPage(){let{data:e}=(0,l.useSession)(),[s,t]=(0,a.useState)([]),[b,N]=(0,a.useState)([]),[v,f]=(0,a.useState)(!0),[y,w]=(0,a.useState)(null),[G,C]=(0,a.useState)(""),[_,P]=(0,a.useState)(null),[S,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async function(){try{f(!0);let e=await fetch("/api/instructor/courses");if(e.ok){let s=await e.json();N(s.courses||[])}let s=_?`/api/instructor/students?courseId=${_}`:"/api/instructor/students",r=await fetch(s);if(!r.ok)throw Error("Failed to fetch students");let a=await r.json();t(a.students||[]),w(null)}catch(e){console.error("Error fetching data:",e),w(e.message||"Failed to load data")}finally{f(!1)}})()},[_]);let Z=s.filter(e=>{let s=e.name.toLowerCase().includes(G.toLowerCase())||e.registrationNumber.toLowerCase().includes(G.toLowerCase())||e.email&&e.email.toLowerCase().includes(G.toLowerCase());return s}),getGradeColor=e=>e>=90?"text-green-600 bg-green-50":e>=80?"text-blue-600 bg-blue-50":e>=70?"text-yellow-600 bg-yellow-50":e>=60?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",getLetterGradeColor=e=>["A+","A","A-"].includes(e)?"text-green-600":["B+","B","B-"].includes(e)?"text-blue-600":["C+","C","C-"].includes(e)?"text-yellow-600":["D+","D","D-"].includes(e)?"text-orange-600":"text-red-600";return v?r.jsx(i.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]})}):r.jsx(i.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Student Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage and track your students by cohort"})]}),y&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:y}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(n.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:Z.length}),r.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Total Students"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(c.Z,{className:"h-5 w-5 opacity-80"})}),(0,r.jsxs)("div",{className:"text-3xl font-bold",children:[Z.length>0?Math.round(Z.reduce((e,s)=>e+s.stats.averageGrade,0)/Z.length):0,"%"]}),r.jsx("div",{className:"text-green-100 text-sm mt-1",children:"Average Grade"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(o.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:Z.reduce((e,s)=>e+s.stats.totalGrades,0)}),r.jsx("div",{className:"text-purple-100 text-sm mt-1",children:"Total Grades"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(x.Z,{className:"h-5 w-5 opacity-80"})}),r.jsx("div",{className:"text-3xl font-bold",children:Z.reduce((e,s)=>e+s.stats.totalQuizAttempts,0)}),r.jsx("div",{className:"text-orange-100 text-sm mt-1",children:"Quiz Attempts"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx("input",{type:"text",placeholder:"Search by name, ID, or registration number...",value:G,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,r.jsxs)("select",{value:_||"",onChange:e=>P(e.target.value||null),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[r.jsx("option",{value:"",children:"All Courses"}),b.map(e=>r.jsx("option",{value:e.id,children:e.title},e.id))]})]})]})}),0===Z.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-12 text-center border border-gray-100",children:[r.jsx(n.Z,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No students found"}),r.jsx("p",{className:"text-gray-600",children:G||_?"Try adjusting your search or filter criteria":"No students are enrolled in your courses yet"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-6",children:Z.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.name}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-1"}),e.email||"No email"]}),(0,r.jsxs)("span",{children:["Reg: ",e.registrationNumber]}),e.cohort&&(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(n.Z,{className:"h-4 w-4 mr-1"}),"Cohort: ",e.cohort.name]})]})]}),(0,r.jsxs)("button",{onClick:()=>A(e),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-1"}),"View Details"]})]}),r.jsx("div",{className:"mb-3",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:e.courses.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r.jsx(p.Z,{className:"h-3 w-3 mr-1"}),e.title]},e.id))})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Average Grade"}),(0,r.jsxs)("div",{className:`text-2xl font-bold ${getGradeColor(e.stats.averageGrade)} px-2 py-1 rounded`,children:[e.stats.averageGrade,"%"]})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Grades"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.stats.totalGrades})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Quiz Attempts"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.stats.totalQuizAttempts})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Submissions"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.stats.totalSubmissions})]})]})]})}),e.recentGrades.length>0&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Recent Grades"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.recentGrades.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:[e.lesson.course.title," - Lesson ",e.lesson.number]}),r.jsx("span",{className:`text-sm font-bold ${getLetterGradeColor(e.letterGrade)}`,children:e.letterGrade}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.totalPoints,"/",e.maxPossiblePoints,")"]})]},e.id)),e.recentGrades.length>3&&(0,r.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:["+",e.recentGrades.length-3," more"]})]})]})]},e.id))}),S&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Student Details"}),r.jsx("button",{onClick:()=>A(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(j.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:S.name}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Registration"}),r.jsx("div",{className:"font-semibold text-gray-900",children:S.registrationNumber})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),r.jsx("div",{className:"font-semibold text-gray-900",children:S.email||"N/A"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Cohort"}),r.jsx("div",{className:"font-semibold text-gray-900",children:S.cohort?.name||"â€”"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Enrolled Courses"}),r.jsx("div",{className:"space-y-2",children:S.courses.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-5 w-5 text-blue-600 mr-2"}),r.jsx("span",{className:"font-medium text-gray-900",children:e.title})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Since ",new Date(e.subscribedAt).toLocaleDateString()]})]},e.id))})]}),S.recentGrades.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Grades"}),r.jsx("div",{className:"space-y-3",children:S.recentGrades.map(e=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.lesson.course.title," - Lesson ",e.lesson.number,":"," ",e.lesson.title]}),r.jsx("div",{className:"text-sm text-gray-600",children:e.exercise.title})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:`text-2xl font-bold ${getLetterGradeColor(e.letterGrade)}`,children:e.letterGrade}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.totalPoints,"/",e.maxPossiblePoints," (",e.percentage,"%)"]})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Graded on ",new Date(e.gradedAt).toLocaleDateString()]})]},e.id))})]})]})]})})]})]})})}},34815:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\instructor\students\page.tsx`),{__esModule:l,$$typeof:i}=a,d=a.default,n=d}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,6309,3782,8200,986,172,7505,3935,7152],()=>__webpack_exec__(40621));module.exports=t})();