(()=>{var e={};e.id=6356,e.ids=[6356],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},26688:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=t(67096),a=t(16132),l=t(37284),i=t.n(l),n=t(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["instructor",{children:["courses",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9513)),"C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\courses\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"C:\\Users\\admin\\projects\\grading-app\\app\\not-found.tsx"]}],c=["C:\\Users\\admin\\projects\\grading-app\\app\\instructor\\courses\\[id]\\page.tsx"],x="/instructor/courses/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/instructor/courses/[id]/page",pathname:"/instructor/courses/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95864:(e,s,t)=>{Promise.resolve().then(t.bind(t,62373))},62373:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>InstructorCourseDetailPage});var r=t(30784),a=t(9885),l=t(57114),i=t(74284),n=t(7152),o=t(93935),d=t(79803),c=t(92032),x=t(81057),m=t(56206),h=t(78937),u=t(50007),g=t(91672),p=t(39546),b=t(35256),j=t(16920),f=t(22385),N=t(69518),y=t(6087),v=t(15441),w=t(28626),C=t(83947),Z=t(93680),S=t(48973),k=t(1626),L=t(47634),A=t(59490),$=t(517),E=t(70696),P=t(1438),_=t(85574),G=t(11440),q=t.n(G);function InstructorCourseDetailPage(){let e=(0,l.useParams)();(0,l.useRouter)();let{data:s}=(0,i.useSession)(),t=e.id,[G,D]=(0,a.useState)(null),[F,T]=(0,a.useState)([]),[z,U]=(0,a.useState)(!0),[I,R]=(0,a.useState)(""),[O,M]=(0,a.useState)(!1),[J,V]=(0,a.useState)(new Set),[B,H]=(0,a.useState)(!1),[Q,W]=(0,a.useState)([]),[X,K]=(0,a.useState)([]),[Y,ee]=(0,a.useState)(!1),[es,et]=(0,a.useState)(null),[er,ea]=(0,a.useState)(""),[el,ei]=(0,a.useState)(""),[en,eo]=(0,a.useState)("lessons"),[ed,ec]=(0,a.useState)(null),[ex,em]=(0,a.useState)(null),[eh,eu]=(0,a.useState)(!1),[eg,ep]=(0,a.useState)("overview"),[eb,ej]=(0,a.useState)(null),[ef,eN]=(0,a.useState)(null),[ey,ev]=(0,a.useState)(!1),[ew,eC]=(0,a.useState)(!1),[eZ,eS]=(0,a.useState)(!1),[ek,eL]=(0,a.useState)({number:"",title:"",description:"",duration:""});(0,a.useEffect)(()=>{t&&(fetchCourse(),fetchUnassignedLessons(),fetchCohorts(),fetchEnrolledCohorts())},[t]);let fetchCourse=async()=>{try{U(!0);let e=await fetch(`/api/instructor/courses/${t}`);if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to fetch course")}let s=await e.json();D(s.course)}catch(e){R(e.message)}finally{U(!1)}},fetchUnassignedLessons=async()=>{try{let e=await fetch(`/api/lessons/unassigned?excludeCourseId=${t}`);if(e.ok){let s=await e.json();T(s.lessons||[])}}catch(e){console.error("Error fetching available lessons:",e)}},handleAssignLesson=async e=>{try{let s=await fetch(`/api/instructor/courses/${t}/lessons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lessonId:e})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to assign lesson")}fetchCourse(),fetchUnassignedLessons(),V(new Set)}catch(e){R(e.message)}},handleBulkAssignLessons=async()=>{if(0===J.size){R("Please select at least one lesson");return}try{H(!0);let e=Array.from(J).map(e=>fetch(`/api/instructor/courses/${t}/lessons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lessonId:e})}));await Promise.all(e),V(new Set),fetchCourse(),fetchUnassignedLessons()}catch(e){R(e.message)}finally{H(!1)}},toggleLessonSelection=e=>{let s=new Set(J);s.has(e)?s.delete(e):s.add(e),V(s)},fetchCohorts=async()=>{try{let e=await fetch("/api/cohorts");if(e.ok){let s=await e.json();W(s.cohorts||[])}}catch(e){console.error("Error fetching cohorts:",e)}},fetchEnrolledCohorts=async()=>{try{let e=await fetch(`/api/courses/${t}/cohorts`);if(e.ok){let s=await e.json();K(s.cohorts||[])}}catch(e){console.error("Error fetching enrolled cohorts:",e)}},handleEnrollCohort=async e=>{try{et(e),R("");let s=await fetch(`/api/courses/${t}/enroll-cohort`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cohortId:e})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to enroll cohort")}let r=await s.json();alert(`Successfully enrolled ${r.enrolled} students from cohort. ${r.alreadyEnrolled>0?`${r.alreadyEnrolled} were already enrolled.`:""}`),fetchEnrolledCohorts(),fetchCourse(),ee(!1)}catch(e){R(e.message)}finally{et(null)}},handleUnenrollCohort=async e=>{if(confirm("Are you sure you want to unenroll this cohort from the course? This will cancel subscriptions for all students in the cohort."))try{et(e),R("");let s=await fetch(`/api/courses/${t}/enroll-cohort?cohortId=${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to unenroll cohort")}let r=await s.json();alert(`Successfully unenrolled ${r.unenrolled} students from cohort.`),fetchEnrolledCohorts(),fetchCourse()}catch(e){R(e.message)}finally{et(null)}},fetchStudentDetails=async e=>{try{eu(!0),R("");let s=await fetch(`/api/instructor/courses/${t}/students/${e}`);if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to fetch student details")}let r=await s.json();em(r),ec(e)}catch(e){R(e.message),ec(null)}finally{eu(!1)}},fetchCohortDetails=async e=>{try{ev(!0),R("");let s=await fetch(`/api/instructor/courses/${t}/cohorts/${e}`);if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to fetch cohort details")}let r=await s.json();eN(r),ej(e)}catch(e){R(e.message),ej(null)}finally{ev(!1)}},downloadCohortGradesCSV=async()=>{if(eb&&t)try{let e=await fetch(`/api/instructor/courses/${t}/cohorts/${eb}/export`);if(!e.ok)throw Error("Failed to export grades");let s=await e.blob(),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`cohort-${ef?.cohort.name||"grades"}-grades.csv`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}catch(e){R(e.message||"Failed to download grades")}},handleCreateLesson=async()=>{if(!ek.number||!ek.title){R("Lesson number and title are required");return}try{eS(!0),R("");let e=await fetch("/api/lessons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:parseInt(ek.number),title:ek.title,description:ek.description||null,duration:ek.duration||null,courseId:t})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create lesson")}eL({number:"",title:"",description:"",duration:""}),eC(!1),fetchCourse(),fetchUnassignedLessons()}catch(e){R(e.message)}finally{eS(!1)}},getNextLessonNumber=()=>{if(!G||0===G.lessons.length)return"1";let e=Math.max(...G.lessons.map(e=>e.number));return(e+1).toString()},eA=G?.subscribers.filter(e=>e.name.toLowerCase().includes(er.toLowerCase())||e.email.toLowerCase().includes(er.toLowerCase()))||[],e$=G?.lessons.filter(e=>e.title.toLowerCase().includes(el.toLowerCase())||e.description?.toLowerCase().includes(el.toLowerCase()))||[];if(z)return r.jsx(n.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]})});if(!G)return r.jsx(n.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-4 py-3 rounded-lg",children:I||"Course not found"})})]})});let eE=G.lessons.reduce((e,s)=>e+s.exerciseCount,0),eP=G.lessons.reduce((e,s)=>e+s.quizAttemptCount,0);return r.jsx(n.Z,{requiredRole:"instructor",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(o.Z,{}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(q(),{href:"/instructor/courses",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"Back to Courses"]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:G.title}),G.description&&r.jsx("p",{className:"text-gray-600 text-lg",children:G.description})]}),r.jsx("div",{className:"flex items-center space-x-2",children:G.isActive?(0,r.jsxs)("div",{className:"bg-green-100 text-green-700 px-3 py-1.5 rounded-full text-sm font-semibold flex items-center shadow-sm",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-1.5"}),"Active"]}):(0,r.jsxs)("div",{className:"bg-gray-100 text-gray-700 px-3 py-1.5 rounded-full text-sm font-semibold flex items-center shadow-sm",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1.5"}),"Inactive"]})})]})]}),I&&(0,r.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center justify-between animate-in slide-in-from-top-2",children:[r.jsx("span",{className:"font-medium",children:I}),r.jsx("button",{onClick:()=>R(""),className:"text-red-700 hover:text-red-900 p-1 rounded hover:bg-red-100 transition-colors",children:r.jsx(m.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-shadow group",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(h.Z,{className:"h-5 w-5 opacity-80 group-hover:scale-110 transition-transform"}),r.jsx(u.Z,{className:"h-4 w-4 opacity-60"})]}),r.jsx("div",{className:"text-3xl font-bold",children:G.stats.lessonCount}),r.jsx("div",{className:"text-blue-100 text-sm mt-1 font-medium",children:"Total Lessons"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-shadow group",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(g.Z,{className:"h-5 w-5 opacity-80 group-hover:scale-110 transition-transform"}),r.jsx(u.Z,{className:"h-4 w-4 opacity-60"})]}),r.jsx("div",{className:"text-3xl font-bold",children:G.stats.subscriberCount}),r.jsx("div",{className:"text-green-100 text-sm mt-1 font-medium",children:"Active Subscribers"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-shadow group",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(p.Z,{className:"h-5 w-5 opacity-80 group-hover:scale-110 transition-transform"}),r.jsx(u.Z,{className:"h-4 w-4 opacity-60"})]}),r.jsx("div",{className:"text-3xl font-bold",children:eE}),r.jsx("div",{className:"text-purple-100 text-sm mt-1 font-medium",children:"Total Exercises"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-shadow group",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(b.Z,{className:"h-5 w-5 opacity-80 group-hover:scale-110 transition-transform"}),r.jsx(u.Z,{className:"h-4 w-4 opacity-60"})]}),r.jsx("div",{className:"text-3xl font-bold",children:eP}),r.jsx("div",{className:"text-orange-100 text-sm mt-1 font-medium",children:"Quiz Attempts"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>eo("lessons"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"lessons"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(h.Z,{className:"h-4 w-4"}),"Lessons (",G.lessons.length,")"]})}),r.jsx("button",{onClick:()=>eo("subscribers"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"subscribers"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(g.Z,{className:"h-4 w-4"}),"Subscribers (",G.subscribers.length,")"]})}),r.jsx("button",{onClick:()=>eo("cohorts"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"cohorts"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(j.Z,{className:"h-4 w-4"}),"Cohorts (",X.length,")"]})})]})}),(0,r.jsxs)("div",{className:"p-6",children:["lessons"===en&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>M(!O),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[r.jsx(f.Z,{className:"h-4 w-4"}),O?"Hide":"Add"," Lessons"]}),(0,r.jsxs)("button",{onClick:()=>{eC(!0),eL({number:getNextLessonNumber(),title:"",description:"",duration:""})},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[r.jsx(f.Z,{className:"h-4 w-4"}),"Create New Lesson"]})]}),G.lessons.length>0&&(0,r.jsxs)("div",{className:"relative",children:[r.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search lessons...",value:el,onChange:e=>ei(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),O&&F.length>0&&(0,r.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Available Lessons (",F.length,")"]}),J.size>0&&r.jsx("button",{onClick:handleBulkAssignLessons,disabled:B,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 shadow-sm",children:B?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Assigning..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Assign Selected (",J.size,")"]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:F.map(e=>(0,r.jsxs)("div",{className:`flex items-center justify-between p-3 bg-white rounded-lg border-2 transition-all ${J.has(e.id)?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[r.jsx("input",{type:"checkbox",checked:J.has(e.id),onChange:()=>toggleLessonSelection(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:["Lesson ",e.number,": ",e.title]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e._count.exercises," exercises"]})]})]}),(0,r.jsxs)("button",{onClick:()=>handleAssignLesson(e.id),className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center ml-2 shadow-sm",children:[r.jsx(y.Z,{className:"h-3 w-3 mr-1"}),"Add"]})]},e.id))})]}),O&&0===F.length&&r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 text-center",children:r.jsx("p",{className:"text-gray-600",children:"No unassigned lessons available"})}),0===e$.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Lessons Assigned"}),r.jsx("p",{className:"text-gray-600",children:"Add lessons to get started"})]}):r.jsx("div",{className:"space-y-3",children:e$.map(e=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(h.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Lesson ",e.number,": ",e.title]}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(p.Z,{className:"h-3 w-3"}),e.exerciseCount," exercises"]}),e.duration&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(v.Z,{className:"h-3 w-3"}),e.duration]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(b.Z,{className:"h-3 w-3"}),e.quizAttemptCount," attempts"]})]})]})]})}),(0,r.jsxs)(q(),{href:`/instructor/lesson/${e.id}`,className:"ml-4 text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1 transition-colors",children:[r.jsx(w.Z,{className:"h-4 w-4"}),"View"]})]})},e.id))})]}),"subscribers"===en&&(0,r.jsxs)("div",{className:"space-y-4",children:[G.subscribers.length>0&&(0,r.jsxs)("div",{className:"relative mb-4",children:[r.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search subscribers by name or email...",value:er,onChange:e=>ea(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),0===eA.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(g.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:er?"No subscribers found":"No Subscribers"}),r.jsx("p",{className:"text-gray-600",children:er?"Try adjusting your search terms":"No students have subscribed to this course yet"}),er&&r.jsx("button",{onClick:()=>ea(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Clear search"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eA.map(e=>r.jsx("button",{onClick:()=>fetchStudentDetails(e.id),className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all text-left w-full group",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:r.jsx(g.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate group-hover:text-blue-600 transition-colors",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[r.jsx(v.Z,{className:"h-3 w-3 mr-1"}),"Subscribed ",new Date(e.subscribedAt).toLocaleDateString()]})]}),r.jsx(w.Z,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-600 transition-colors opacity-0 group-hover:opacity-100"})]})},e.id))})]}),"cohorts"===en&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("button",{onClick:()=>ee(!Y),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[r.jsx(f.Z,{className:"h-4 w-4"}),Y?"Hide":"Enroll"," Cohorts"]})}),Y&&(0,r.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Available Cohorts"}),0===Q.length?r.jsx("p",{className:"text-gray-600 text-sm",children:"No cohorts available."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Q.filter(e=>!X.find(s=>s.id===e.id)).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e._count?.students||0," students"]})]}),r.jsx("button",{onClick:()=>handleEnrollCohort(e.id),disabled:es===e.id,className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 shadow-sm",children:es===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Enrolling..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(j.Z,{className:"h-3 w-3 mr-1"}),"Enroll"]})})]},e.id))})]}),0===X.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(j.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No cohorts enrolled in this course"}),Q.length>0&&r.jsx("button",{onClick:()=>ee(!0),className:"mt-4 text-purple-600 hover:text-purple-700 font-medium",children:"Enroll cohorts now"})]}):r.jsx("div",{className:"space-y-3",children:X.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("button",{onClick:()=>fetchCohortDetails(e.id),className:"flex items-center space-x-4 flex-1 text-left group",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:r.jsx(j.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-gray-900 group-hover:text-purple-600 transition-colors",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.enrolledStudents," of ",e.totalStudents," students enrolled"]}),e.description&&r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),r.jsx(w.Z,{className:"h-4 w-4 text-gray-400 group-hover:text-purple-600 transition-colors opacity-0 group-hover:opacity-100"})]}),r.jsx("button",{onClick:s=>{s.stopPropagation(),handleUnenrollCohort(e.id)},disabled:es===e.id,className:"text-red-600 hover:text-red-700 text-sm font-medium flex items-center disabled:opacity-50 transition-colors ml-4",children:es===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600 mr-1"}),"Unenrolling..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(C.Z,{className:"h-3 w-3 mr-1"}),"Unenroll"]})})]},e.id))})]})]})]})]}),ew&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl",children:r.jsx(f.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Lesson"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:G?.title})]})]}),r.jsx("button",{onClick:()=>{eC(!1),eL({number:"",title:"",description:"",duration:""}),R("")},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(m.Z,{className:"h-5 w-5 text-gray-600"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"lesson-number",className:"block text-sm font-medium text-gray-700 mb-2",children:["Lesson Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"lesson-number",value:ek.number,onChange:e=>eL({...ek,number:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter lesson number",min:"1",required:!0}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Suggested: ",getNextLessonNumber()," (based on existing lessons)"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"lesson-title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Lesson Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"lesson-title",value:ek.title,onChange:e=>eL({...ek,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter lesson title",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"lesson-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{id:"lesson-description",value:ek.description,onChange:e=>eL({...ek,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter lesson description (optional)",rows:4})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"lesson-duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),r.jsx("input",{type:"text",id:"lesson-duration",value:ek.duration,onChange:e=>eL({...ek,duration:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1 hour, 2 hours, 45 minutes"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[r.jsx("button",{onClick:()=>{eC(!1),eL({number:"",title:"",description:"",duration:""}),R("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:handleCreateLesson,disabled:eZ||!ek.number||!ek.title,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:eZ?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(f.Z,{className:"h-4 w-4"}),"Create Lesson"]})})]})]})}),ed&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 p-3 rounded-xl",children:r.jsx(Z.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:eh?"Loading...":ex?.student.name||"Student Details"}),ex&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ex.course.title})]})]}),r.jsx("button",{onClick:()=>{ec(null),em(null)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(m.Z,{className:"h-5 w-5 text-gray-600"})})]}),r.jsx("div",{className:"flex flex-col h-full",children:eh?r.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):ex?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"border-b border-gray-200 px-6",children:(0,r.jsxs)("nav",{className:"flex space-x-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>ep("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"overview"===eg?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(b.Z,{className:"h-4 w-4"}),"Overview"]})}),r.jsx("button",{onClick:()=>ep("grades"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"grades"===eg?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(S.Z,{className:"h-4 w-4"}),"Grades (",ex.grades.length,")"]})}),r.jsx("button",{onClick:()=>ep("quizzes"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"quizzes"===eg?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(k.Z,{className:"h-4 w-4"}),"Quizzes (",ex.quizAttempts.length,")"]})}),r.jsx("button",{onClick:()=>ep("submissions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"submissions"===eg?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(L.Z,{className:"h-4 w-4"}),"Submissions (",ex.exerciseSubmissions.length,")"]})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===eg&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Student Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(A.Z,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:ex.student.email})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(Z.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Reg: ",ex.student.registrationNumber]})]}),ex.student.cohort&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(j.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Cohort: ",ex.student.cohort.name]})]}),ex.student.subscribedAt&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx($.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Enrolled: ",new Date(ex.student.subscribedAt).toLocaleDateString()]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(E.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[ex.stats.completionPercentage,"%"]}),r.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Course Progress"})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(P.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:[ex.stats.averageGrade,"%"]}),r.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Average Grade"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(c.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-900",children:[ex.stats.completedLessons,"/",ex.stats.totalLessons]}),r.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Lessons Completed"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(p.Z,{className:"h-5 w-5 text-orange-600"})}),r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:ex.stats.totalGrades}),r.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"Total Grades"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Course Progress"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[ex.stats.completedLessons," of ",ex.stats.totalLessons," lessons"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full transition-all duration-500",style:{width:`${ex.stats.completionPercentage}%`}})})]})]}),"grades"===eg&&r.jsx("div",{children:ex.grades.length>0?r.jsx("div",{className:"space-y-2",children:ex.grades.map(e=>r.jsx(q(),{href:`/instructor/exercise/${e.exerciseId}/grade?studentId=${ex.student.id}`,className:"block border border-gray-200 rounded-lg p-3 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:["Lesson ",e.lesson.number,": ",e.lesson.title]}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:e.exercise.title}),e.feedback&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1 italic line-clamp-1",children:['"',e.feedback,'"']})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 ml-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.percentage,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:e.letterGrade}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(e.gradedAt).toLocaleDateString()})]}),r.jsx(w.Z,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors opacity-0 group-hover:opacity-100"})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(S.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No grades recorded yet"})]})}),"quizzes"===eg&&r.jsx("div",{children:ex.quizAttempts.length>0?r.jsx("div",{className:"space-y-2",children:ex.quizAttempts.map(e=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-blue-300 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:["Lesson ",e.lesson.number,": ",e.lesson.title]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.passed?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.score,"%"]}),e.passed?r.jsx(c.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(x.Z,{className:"h-5 w-5 text-red-600"})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(k.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No quiz attempts recorded yet"})]})}),"submissions"===eg&&r.jsx("div",{children:ex.exerciseSubmissions.length>0?r.jsx("div",{className:"space-y-2",children:ex.exerciseSubmissions.map(e=>r.jsx(q(),{href:`/instructor/exercise/${e.exercise.id}/grade?studentId=${ex.student.id}`,className:"block border border-gray-200 rounded-lg p-3 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:["Lesson ",e.exercise.lesson.number,": ",e.exercise.lesson.title]}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:e.exercise.title}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.submittedAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 ml-4",children:[r.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${"submitted"===e.status?"bg-blue-100 text-blue-700":"graded"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:e.status}),r.jsx(w.Z,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors opacity-0 group-hover:opacity-100"})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(L.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No exercise submissions recorded yet"})]})})]})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center py-12 text-gray-500",children:r.jsx("p",{children:"Failed to load student details"})})})]})}),eb&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 p-3 rounded-xl",children:r.jsx(j.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:ey?"Loading...":ef?.cohort.name||"Cohort Details"}),ef&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ef.course.title})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[ef&&(0,r.jsxs)("button",{onClick:downloadCohortGradesCSV,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center gap-2",children:[r.jsx(_.Z,{className:"h-4 w-4"}),"Download Grades CSV"]}),r.jsx("button",{onClick:()=>{ej(null),eN(null)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(m.Z,{className:"h-5 w-5 text-gray-600"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:ey?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):ef?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Cohort Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Name:"}),r.jsx("p",{className:"font-medium text-gray-900",children:ef.cohort.name})]}),ef.cohort.description&&(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),r.jsx("p",{className:"font-medium text-gray-900",children:ef.cohort.description})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),r.jsx("p",{className:"font-medium text-gray-900",children:ef.cohort.isActive?"Active":"Inactive"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(g.Z,{className:"h-5 w-5 text-blue-600"})}),r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ef.stats.totalStudents}),r.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Total Students"})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(P.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:[ef.stats.averageGrade,"%"]}),r.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Average Grade"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(c.Z,{className:"h-5 w-5 text-purple-600"})}),r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:ef.stats.studentsWithGrades}),r.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Students Graded"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(p.Z,{className:"h-5 w-5 text-orange-600"})}),r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:ef.stats.totalGrades}),r.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"Total Grades"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(g.Z,{className:"h-5 w-5 text-blue-600"}),"Students (",ef.students.length,")"]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grades"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Grade"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lessons"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ef.students.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-600",children:e.registrationNumber})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-600",children:e.email||"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.totalGrades})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("div",{className:`text-sm font-bold ${e.averageGrade>=70?"text-green-600":e.averageGrade>=50?"text-yellow-600":"text-red-600"}`,children:e.averageGrade>0?`${e.averageGrade}%`:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.completedLessons,"/",ef.stats.totalLessons]})})]},e.studentId))})]})})})]}),ef.grades.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(S.Z,{className:"h-5 w-5 text-yellow-600"}),"Recent Grades (",ef.grades.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:ef.grades.slice(0,10).map(e=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-blue-300 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[e.studentName," (",e.studentRegistration,")"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Lesson ",e.lessonNumber,": ",e.lessonTitle]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.exerciseTitle})]}),(0,r.jsxs)("div",{className:"text-right ml-4",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.percentage,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:e.letterGrade}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(e.gradedAt).toLocaleDateString()})]})]})},e.id))})]})]}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:r.jsx("p",{children:"Failed to load cohort details"})})})]})})]})})}},9513:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\instructor\courses\[id]\page.tsx`),{__esModule:l,$$typeof:i}=a,n=a.default,o=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,6309,3782,8200,986,8894,6856,5816,7505,3935,7152],()=>__webpack_exec__(26688));module.exports=t})();