(()=>{var e={};e.id=9281,e.ids=[9281],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},57310:e=>{"use strict";e.exports=require("url")},23362:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(67096),a=t(16132),l=t(37284),i=t.n(l),n=t(32564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["student",{children:["lesson",{children:["[lessonId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39663)),"C:\\Users\\admin\\projects\\grading-app\\app\\student\\lesson\\[lessonId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\admin\\projects\\grading-app\\app\\student\\lesson\\[lessonId]\\page.tsx"],x="/student/lesson/[lessonId]/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/student/lesson/[lessonId]/page",pathname:"/student/lesson/[lessonId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29822:(e,s,t)=>{Promise.resolve().then(t.bind(t,38123))},38123:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>StudentLessonPage});var r=t(30784),a=t(9885),l=t(57114),i=t(74284),n=t(7152),d=t(93935),c=t(75865),o=t(25875),x=t(51831),m=t(23294),u=t(79803),h=t(15441),p=t(78937),g=t(92032),b=t(1626),j=t(39546),N=t(47634),f=t(48973),y=t(11440),v=t.n(y);function StudentLessonPage(){let e=(0,l.useParams)(),{data:s}=(0,i.useSession)(),t=e.lessonId,[y,w]=(0,a.useState)(null),[k,Z]=(0,a.useState)([]),[P,_]=(0,a.useState)([]),[q,I]=(0,a.useState)([]),[S,E]=(0,a.useState)([]),[$,z]=(0,a.useState)([]),[C,L]=(0,a.useState)(null),[Q,R]=(0,a.useState)(!0),[A,D]=(0,a.useState)(null),[O,U]=(0,a.useState)(!1),[G,M]=(0,a.useState)("content");(0,a.useEffect)(()=>{let fetchStudentProfile=async()=>{if(s?.user?.id)try{let e=await fetch(`/api/students?userId=${s.user.id}`);if(e.ok){let s=await e.json();s.students&&s.students.length>0&&L({id:s.students[0].id})}}catch(e){console.error("Error fetching student profile:",e)}};fetchStudentProfile()},[s?.user?.id]),(0,a.useEffect)(()=>{let loadLessonData=async()=>{if(C)try{R(!0),D(null),U(!1);let e=await fetch(`/api/lessons/${t}`);if(!e.ok)throw Error("Failed to fetch lesson");let s=await e.json();w(s.lesson);let r=await fetch(`/api/quiz-attempts?studentId=${C.id}`);if(r.ok){let e=await r.json();_(e.attempts||[])}let a=await fetch(`/api/exercise-submissions?studentId=${C.id}`);if(a.ok){let e=await a.json();I((e.submissions||[]).filter(e=>e.lessonId).map(e=>({exerciseId:e.exerciseId,lessonId:e.lessonId})))}let l=await fetch(`/api/quiz-attempts?studentId=${C.id}&lessonId=${t}`);if(l.ok){let e=await l.json();Z(e.attempts||[])}let i=await fetch("/api/student/courses");if(i.ok){let e=await i.json(),t=e.courses.find(e=>e.id===s.lesson.courseId);t&&E(t.lessons.map(e=>({id:e.id,number:e.number})))}let n=await fetch(`/api/lesson-notes?lessonId=${t}`);if(n.ok){let e=await n.json();z(e.notes||[])}}catch(e){console.error("Error loading lesson data:",e),D("Failed to load lesson data")}finally{R(!1)}};C&&loadLessonData()},[t,C]),(0,a.useEffect)(()=>{if(!y||0===S.length)return;if(1===y.number){U(!1);return}let e=S.find(e=>e.number===y.number-1);if(!e){U(!1);return}let s=P.some(s=>s.lessonId===e.id&&s.passed),t=q.some(s=>s.lessonId===e.id),r=s||t;U(!r)},[y,S,P,q]);let hasPassedQuiz=()=>k.some(e=>e.passed);return Q?r.jsx(n.Z,{requiredRole:"student",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading lesson..."})]})]})}):A||!y?r.jsx(n.Z,{requiredRole:"student",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-center",children:[r.jsx(x.Z,{className:"h-5 w-5 inline mr-2"}),A||"Lesson not found"]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(v(),{href:"/student",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 inline-block",children:"Back to Dashboard"})})]})]})}):O?r.jsx(n.Z,{requiredRole:"student",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8 border border-gray-100 text-center",children:[r.jsx(m.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Lesson Locked"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You need to complete the previous lesson's quiz to unlock this lesson."}),(0,r.jsxs)("div",{className:"space-x-4",children:[r.jsx(v(),{href:"/student",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 inline-block",children:"Back to Dashboard"}),S.length>0&&r.jsx(v(),{href:`/student/course/${y.courseId}`,className:"bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 inline-block",children:"View Course"})]})]})})]})}):r.jsx(n.Z,{requiredRole:"student",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx(d.Z,{}),r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(v(),{href:"/student",className:"flex items-center text-gray-600 hover:text-blue-600 transition-colors",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),r.jsx("div",{className:"h-6 w-px bg-gray-300"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-xl font-semibold text-gray-900",children:["Lesson ",y.number,": ",y.title]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[y.duration&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-1"}),y.duration]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-1"}),y.course.title]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:hasPassedQuiz()?(0,r.jsxs)("div",{className:"flex items-center text-green-600 bg-green-50 px-3 py-2 rounded-lg",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Quiz Passed"})]}):(0,r.jsxs)(v(),{href:`/student/quiz/${y.id}`,className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 transition-colors duration-200 flex items-center",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Take Quiz"]})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lesson Navigation"}),(0,r.jsxs)("div",{className:"mb-6 p-4 rounded-lg border border-gray-200 bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[hasPassedQuiz()?r.jsx(g.Z,{className:"h-5 w-5 text-green-500 mr-2"}):r.jsx(m.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),r.jsx("span",{className:"font-medium text-gray-900",children:"Quiz Status"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:hasPassedQuiz()?"You have passed the quiz and can access all content.":"Complete the quiz to unlock all lesson content."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>M("content"),className:`w-full text-left p-3 rounded-md transition-colors duration-200 ${"content"===G?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Lesson Content"]})}),r.jsx("button",{onClick:()=>M("notes"),className:`w-full text-left p-3 rounded-md transition-colors duration-200 ${"notes"===G?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Online Notes"]}),$.length>0&&r.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:$.length})]})}),r.jsx("button",{onClick:()=>M("exercise"),className:`w-full text-left p-3 rounded-md transition-colors duration-200 ${"exercise"===G?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"Practical Exercise",y.exercises.length>0&&r.jsx("span",{className:"ml-auto bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:y.exercises.length})]})})]})]})}),r.jsx("div",{className:"lg:col-span-3",children:"content"===G?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Lesson Overview"}),y.description?r.jsx("p",{className:"text-gray-700 leading-relaxed",children:y.description}):r.jsx("p",{className:"text-gray-500 italic",children:"No description available for this lesson."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Learning Objectives"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsxs)("li",{className:"flex items-start",children:[r.jsx(g.Z,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700",children:"Understand the fundamental concepts and principles covered in this lesson"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[r.jsx(g.Z,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700",children:"Apply knowledge through hands-on practice and exercises"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[r.jsx(g.Z,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700",children:"Demonstrate competency through quiz assessment"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(N.Z,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.stats.exerciseCount}),r.jsx("div",{className:"text-sm text-gray-600",children:"Exercises"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(b.Z,{className:"h-5 w-5 text-purple-600 mr-2"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.stats.quizQuestionCount}),r.jsx("div",{className:"text-sm text-gray-600",children:"Quiz Questions"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(f.Z,{className:"h-5 w-5 text-green-600 mr-2"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Your Attempts"})]})]})})]})]}):"notes"===G?r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Online Notes"}),0===$.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(j.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No notes available"}),r.jsx("p",{className:"text-gray-600",children:"Instructor notes for this lesson haven't been added yet."})]}):r.jsx("div",{className:"space-y-6",children:["introduction","objectives","content","examples","exercises","summary","resources"].map(e=>{let s=$.filter(s=>s.section===e);return 0===s.length?null:(0,r.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:{introduction:"Introduction",objectives:"Learning Objectives",content:"Main Content",examples:"Examples",exercises:"Exercises",summary:"Summary",resources:"Additional Resources"}[e]}),r.jsx("div",{className:"space-y-4",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),r.jsx("div",{className:"text-gray-700 markdown-content",children:r.jsx(c.UG,{remarkPlugins:[o.Z],children:e.content})})]},e.id))})]},e)})})]})}):r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Practical Exercises"}),0===y.exercises.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(N.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No exercises available"}),r.jsx("p",{className:"text-gray-600",children:"Exercises for this lesson haven't been added yet."})]}):y.exercises.map((e,s)=>(0,r.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 last:border-0 last:mb-0 last:pb-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Exercise ",s+1,": ",e.title]}),e.description&&r.jsx("p",{className:"text-gray-700 mb-4",children:e.description})]}),r.jsx("div",{className:"ml-4 flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium",children:[r.jsx(f.Z,{className:"h-4 w-4 inline mr-1"}),e.maxPoints," points"]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["Rubric: ",e.rubric.name]}),e.rubric.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.rubric.description}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.rubric.criteria.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"text-xs",children:[r.jsx("span",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("span",{className:"text-gray-600 ml-1",children:["(",e.weight,"% weight)"]})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)(v(),{href:`/student/exercise/${e.id}`,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center",children:[r.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"Start Exercise"]}),(0,r.jsxs)("button",{onClick:()=>{alert("Rubric details:\n\n"+e.rubric.criteria.map(e=>`- ${e.name} (${e.weight}% weight)`).join("\n"))},className:"bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 transition-colors duration-200 flex items-center",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"View Rubric"]})]})]},e.id))]})})})]})})]})})}},39663:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>d});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\student\lesson\[lessonId]\page.tsx`),{__esModule:l,$$typeof:i}=a,n=a.default,d=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,9045,1440,3528,8200,986,7309,356,475,7134,3935,7152],()=>__webpack_exec__(23362));module.exports=t})();