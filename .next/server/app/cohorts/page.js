(()=>{var e={};e.id=7499,e.ids=[7499],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},96294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=r(67096),a=r(16132),o=r(37284),l=r.n(o),n=r(32564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let c=["",{children:["cohorts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5564)),"C:\\Users\\admin\\projects\\grading-app\\app\\cohorts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"C:\\Users\\admin\\projects\\grading-app\\app\\not-found.tsx"]}],d=["C:\\Users\\admin\\projects\\grading-app\\app\\cohorts\\page.tsx"],u="/cohorts/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cohorts/page",pathname:"/cohorts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},58825:(e,t,r)=>{Promise.resolve().then(r.bind(r,62609))},62609:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>CohortsPage});var s=r(30784),a=r(9885),o=r(92032),l=r(51831),n=r(69518),i=r(12029),c=r(22385),d=r(56206),u=r(52995),m=r(91672),x=r(517),h=r(15441),p=r(59494),g=r(26303),b=r(93935),f=r(7152);function CohortsPage(){let[e,t]=(0,a.useState)([]),[r,y]=(0,a.useState)(!0),[j,v]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[C,D]=(0,a.useState)(""),[_,k]=(0,a.useState)("all"),[A,S]=(0,a.useState)(!1),[E,P]=(0,a.useState)(null),[F,Z]=(0,a.useState)({name:"",description:"",startDate:"",endDate:"",isActive:!0}),fetchCohorts=async()=>{try{y(!0);let e=await fetch("/api/cohorts");if(!e.ok)throw Error("Failed to fetch cohorts");let r=await e.json();t(r.cohorts)}catch(e){console.error("Error fetching cohorts:",e),v("Failed to load cohorts")}finally{y(!1)}},createCohort=async e=>{let t=await fetch("/api/cohorts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create cohort")}let r=await t.json();return r.cohort},updateCohort=async(e,t)=>{let r=await fetch(`/api/cohorts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update cohort")}let s=await r.json();return s.cohort},deleteCohort=async e=>{let t=await fetch(`/api/cohorts/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete cohort")}return!0};(0,a.useEffect)(()=>{fetchCohorts()},[]);let q=e.filter(e=>{let t=e.name.toLowerCase().includes(C.toLowerCase())||e.description&&e.description.toLowerCase().includes(C.toLowerCase()),r="all"===_||"active"===_&&e.isActive||"inactive"===_&&!e.isActive;return t&&r}),handleAddCohort=async()=>{if(!F.name.trim()){v("Cohort name is required");return}try{v(null);let r=await createCohort(F);t([...e,r]),resetForm(),S(!1),N("Cohort created successfully"),setTimeout(()=>N(null),3e3)}catch(e){v(e instanceof Error?e.message:"Failed to create cohort")}},handleUpdateCohort=async()=>{if(E){if(!F.name.trim()){v("Cohort name is required");return}try{v(null);let r=await updateCohort(E.id,F);t(e.map(e=>e.id===E.id?r:e)),resetForm(),P(null),N("Cohort updated successfully"),setTimeout(()=>N(null),3e3)}catch(e){v(e instanceof Error?e.message:"Failed to update cohort")}}},handleDeleteCohort=async r=>{if(confirm("Are you sure you want to delete this cohort? This action cannot be undone."))try{v(null),await deleteCohort(r),t(e.filter(e=>e.id!==r)),N("Cohort deleted successfully"),setTimeout(()=>N(null),3e3)}catch(e){v(e instanceof Error?e.message:"Failed to delete cohort")}},resetForm=()=>{Z({name:"",description:"",startDate:"",endDate:"",isActive:!0}),S(!1),P(null)},startEdit=e=>{P(e),Z({name:e.name,description:e.description||"",startDate:e.startDate?new Date(e.startDate).toISOString().split("T")[0]:"",endDate:e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"",isActive:e.isActive})};return s.jsx(f.Z,{requiredRole:["instructor","admin"],children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx(b.Z,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Cohort Management"}),s.jsx("p",{className:"text-gray-600",children:"Create and manage student cohorts"})]}),w&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center",children:[s.jsx(o.Z,{className:"h-5 w-5 mr-2"}),w]}),j&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center",children:[s.jsx(l.Z,{className:"h-5 w-5 mr-2"}),j]}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[s.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",placeholder:"Search cohorts...",value:C,onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,s.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[150px]",children:[s.jsx("option",{value:"all",children:"All Cohorts"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]}),(0,s.jsxs)("button",{onClick:()=>{resetForm(),S(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium w-full md:w-auto justify-center",children:[s.jsx(c.Z,{className:"h-5 w-5 mr-2"}),"Create Cohort"]})]})}),(A||E)&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:E?"Edit Cohort":"Create New Cohort"}),s.jsx("button",{onClick:resetForm,className:"text-gray-400 hover:text-gray-600",children:s.jsx(d.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Cohort Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:F.name,onChange:e=>Z({...F,name:e.target.value}),placeholder:"e.g., Cohort 2024, Spring 2024",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:F.description,onChange:e=>Z({...F,description:e.target.value}),placeholder:"Optional description for this cohort",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:F.startDate,onChange:e=>Z({...F,startDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:F.endDate,onChange:e=>Z({...F,endDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:F.isActive,onChange:e=>Z({...F,isActive:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active (cohort is currently in use)"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsxs)("button",{onClick:E?handleUpdateCohort:handleAddCohort,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[s.jsx(u.Z,{className:"h-5 w-5 mr-2"}),E?"Update Cohort":"Create Cohort"]}),s.jsx("button",{onClick:resetForm,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}),r?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===q.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-12 text-center border border-gray-100",children:[s.jsx(m.Z,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No cohorts found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:C||"all"!==_?"Try adjusting your search or filter criteria":"Get started by creating your first cohort"}),!C&&"all"===_&&(0,s.jsxs)("button",{onClick:()=>{resetForm(),S(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[s.jsx(c.Z,{className:"h-5 w-5 mr-2"}),"Create Cohort"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>(0,s.jsxs)("div",{className:`bg-white rounded-xl shadow-md p-6 border-2 transition-all hover:shadow-lg ${e.isActive?"border-blue-200":"border-gray-200 opacity-75"}`,children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.isActive?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Inactive"}),(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(m.Z,{className:"h-3 w-3 mr-1"}),e._count?.students||0," students"]})]})]})}),(e.startDate||e.endDate)&&(0,s.jsxs)("div",{className:"mb-4 space-y-1 text-sm text-gray-600",children:[e.startDate&&(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Start: ",new Date(e.startDate).toLocaleDateString()]}),e.endDate&&(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"End: ",new Date(e.endDate).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>startEdit(e),className:"flex-1 flex items-center justify-center px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium",children:[s.jsx(p.Z,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>handleDeleteCohort(e.id),className:"flex items-center justify-center px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",disabled:e._count&&e._count.students>0,title:e._count&&e._count.students>0?"Cannot delete cohort with students":"Delete cohort",children:s.jsx(g.Z,{className:"h-4 w-4"})})]})]},e.id))})]})]})})}},5564:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>o,default:()=>i});var s=r(95153);let a=(0,s.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\cohorts\page.tsx`),{__esModule:o,$$typeof:l}=a,n=a.default,i=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[657,6309,3782,8200,986,8792,7505,3935,7152],()=>__webpack_exec__(96294));module.exports=r})();