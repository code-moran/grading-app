"use strict";(()=>{var e={};e.id=4279,e.ids=[4279],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},75058:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>m,originalPathname:()=>f,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>q});var s={};t.r(s),t.d(s,{DELETE:()=>DELETE,GET:()=>GET});var o=t(10884),n=t(16132),i=t(95798),u=t(15204),a=t(94020),c=t(8192);async function GET(e,{params:r}){try{let{id:e}=r;if(!u._)return i.Z.json({error:"Database connection error"},{status:500});let t=await u._.course.findUnique({where:{id:e},include:{lessons:{orderBy:{number:"asc"},include:{_count:{select:{exercises:!0,quizAttempts:!0}}}},subscriptions:{where:{status:"active"},include:{user:{select:{id:!0,name:!0,email:!0,role:!0}},student:{select:{id:!0,name:!0,email:!0,registrationNumber:!0}}},orderBy:{subscribedAt:"desc"}},_count:{select:{lessons:!0,subscriptions:!0}}}});if(!t)return i.Z.json({error:"Course not found"},{status:404});return i.Z.json({course:t})}catch(e){return console.error("Error fetching course:",e),i.Z.json({error:"Failed to fetch course"},{status:500})}}async function DELETE(e,{params:r}){try{let e=await (0,a.getServerSession)(c.L);if(!e?.user||"admin"!==e.user.role)return i.Z.json({error:"Unauthorized. Admin access required."},{status:403});if(!u._)return i.Z.json({error:"Database connection error"},{status:500});let{id:t}=r,s=await u._.course.findUnique({where:{id:t},include:{_count:{select:{subscriptions:!0,lessons:!0}}}});if(!s)return i.Z.json({error:"Course not found"},{status:404});return await u._.course.delete({where:{id:t}}),i.Z.json({message:"Course deleted successfully"})}catch(e){return console.error("Error deleting course:",e),i.Z.json({error:"Failed to delete course"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/courses/[id]/route",pathname:"/api/courses/[id]",filename:"route",bundlePath:"app/api/courses/[id]/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\courses\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:x,headerHooks:m,staticGenerationBailout:q}=p,f="/api/courses/[id]/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[657,8557,5798,7391,5226,8192],()=>__webpack_exec__(75058));module.exports=t})();