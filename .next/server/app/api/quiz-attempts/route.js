"use strict";(()=>{var e={};e.id=4860,e.ids=[4860],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91085:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>l,originalPathname:()=>P,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var r={};s.r(r),s.d(r,{GET:()=>GET,POST:()=>POST});var a=s(10884),i=s(16132),n=s(95798),o=s(15204);async function GET(e){try{let{searchParams:t}=new URL(e.url),s=t.get("studentId"),r=t.get("lessonId"),a={};s&&(a.studentId=s),r&&(a.lessonId=r);let i=await o._.quizAttempt.findMany({where:a,orderBy:{completedAt:"desc"}}),u=i.map(e=>({id:e.id,studentId:e.studentId,lessonId:e.lessonId,questions:e.questions,score:e.score,passed:e.passed,completedAt:e.completedAt,timeSpent:e.timeSpent}));return n.Z.json({attempts:u})}catch(e){return console.error("Error fetching quiz attempts:",e),n.Z.json({error:"Failed to fetch quiz attempts"},{status:500})}}async function POST(e){try{let t=await e.json(),{studentId:s,lessonId:r,questions:a,score:i,passed:u,timeSpent:d}=t;if(!s||!r||!a||void 0===i||void 0===u)return n.Z.json({error:"Missing required fields"},{status:400});console.log("Creating quiz attempt:",{studentId:s,lessonId:r,questions:a,score:i,passed:u,timeSpent:d});let p=await o._.quizAttempt.create({data:{studentId:s,lessonId:r,questions:a,score:i,passed:u,timeSpent:d||0}}),c={id:p.id,studentId:p.studentId,lessonId:p.lessonId,questions:p.questions,score:p.score,passed:p.passed,completedAt:p.completedAt,timeSpent:p.timeSpent};return n.Z.json({attempt:c},{status:201})}catch(e){return console.error("Error creating quiz attempt:",e),n.Z.json({error:"Failed to create quiz attempt"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/quiz-attempts/route",pathname:"/api/quiz-attempts",filename:"route",bundlePath:"app/api/quiz-attempts/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\quiz-attempts\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:c,headerHooks:l,staticGenerationBailout:m}=u,P="/api/quiz-attempts/route"},15204:(e,t,s)=>{s.d(t,{_:()=>i});var r=s(53524);let a=globalThis,i=a.prisma??new r.PrismaClient},16132:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[8557,5798],()=>__webpack_exec__(91085));module.exports=s})();