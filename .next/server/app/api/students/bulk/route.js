"use strict";(()=>{var e={};e.id=7174,e.ids=[7174],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78897:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>p,originalPathname:()=>m,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>h});var n={};r.r(n),r.d(n,{POST:()=>POST});var a=r(10884),o=r(16132),i=r(95798),s=r(15204);async function POST(e){try{let t=await e.json(),{students:r}=t;if(!r||!Array.isArray(r)||0===r.length)return i.Z.json({error:"Students array is required and must not be empty"},{status:400});let n=[],a=[];return await s._.$transaction(async e=>{for(let t=0;t<r.length;t++){let o=r[t],{name:i,registrationNumber:s,cohortId:u}=o;if(!i||!s){a.push(`Row ${t+1}: Name and registration number are required`);continue}let d=await e.student.findUnique({where:{registrationNumber:s}});if(d){a.push(`Row ${t+1}: Student with registration number ${s} already exists`);continue}if(u){let r=await e.cohort.findUnique({where:{id:u}});if(!r){a.push(`Row ${t+1}: Cohort not found`);continue}}let l=await e.student.create({data:{name:i,registrationNumber:s,cohortId:u||null},include:{cohort:{select:{id:!0,name:!0}}}}),c={id:l.id,name:l.name,email:l.email||void 0,registrationNumber:l.registrationNumber,cohortId:l.cohortId||void 0,userId:l.userId||void 0,cohort:l.cohort?{id:l.cohort.id,name:l.cohort.name}:void 0};n.push(c)}}),i.Z.json({success:!0,students:n,errors:a,message:`Successfully created ${n.length} students${a.length>0?` with ${a.length} errors`:""}`})}catch(e){return console.error("Error bulk creating students:",e),i.Z.json({error:"Failed to bulk create students"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/students/bulk/route",pathname:"/api/students/bulk",filename:"route",bundlePath:"app/api/students/bulk/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\students\\bulk\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:c,headerHooks:p,staticGenerationBailout:h}=u,m="/api/students/bulk/route"},15204:(e,t,r)=>{r.d(t,{_:()=>o});var n=r(53524);let a=globalThis,o=a.prisma??new n.PrismaClient},16132:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[8557,5798],()=>__webpack_exec__(78897));module.exports=r})();