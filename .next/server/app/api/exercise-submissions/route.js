"use strict";(()=>{var e={};e.id=1289,e.ids=[1289],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},58948:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>m,originalPathname:()=>b,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>p});var r={};t.r(r),t.d(r,{GET:()=>GET,POST:()=>POST});var i=t(10884),n=t(16132),a=t(95798),o=t(15204);async function GET(e){try{let{searchParams:s}=new URL(e.url),t=s.get("studentId"),r=s.get("exerciseId"),i={};t&&(i.studentId=t),r&&(i.exerciseId=r);let n=await o._.exerciseSubmission.findMany({where:i,include:{exercise:{select:{lessonId:!0}}},orderBy:{submittedAt:"desc"}}),d=n.map(e=>({id:e.id,studentId:e.studentId,exerciseId:e.exerciseId,githubUrl:e.githubUrl,codingStandards:e.codingStandards,submittedAt:e.submittedAt,status:e.status,lessonId:e.exercise.lessonId}));return a.Z.json({submissions:d})}catch(e){return console.error("Error fetching exercise submissions:",e),a.Z.json({error:"Failed to fetch exercise submissions"},{status:500})}}async function POST(e){try{let s=await e.json(),{studentId:t,exerciseId:r,githubUrl:i,codingStandards:n,status:d}=s;if(!t||!r||!i||!n)return a.Z.json({error:"Missing required fields"},{status:400});let u=await o._.exerciseSubmission.create({data:{studentId:t,exerciseId:r,githubUrl:i,codingStandards:n,status:d||"pending"}}),c={id:u.id,studentId:u.studentId,exerciseId:u.exerciseId,githubUrl:u.githubUrl,codingStandards:u.codingStandards,submittedAt:u.submittedAt,status:u.status};return a.Z.json({submission:c},{status:201})}catch(e){return console.error("Error creating exercise submission:",e),a.Z.json({error:"Failed to create exercise submission"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/exercise-submissions/route",pathname:"/api/exercise-submissions",filename:"route",bundlePath:"app/api/exercise-submissions/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\exercise-submissions\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:c,serverHooks:l,headerHooks:m,staticGenerationBailout:p}=d,b="/api/exercise-submissions/route"},15204:(e,s,t)=>{t.d(s,{_:()=>n});var r=t(53524);let i=globalThis,n=i.prisma??new r.PrismaClient},16132:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[8557,5798],()=>__webpack_exec__(58948));module.exports=t})();