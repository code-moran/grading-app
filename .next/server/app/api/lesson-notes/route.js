"use strict";(()=>{var e={};e.id=9442,e.ids=[9442],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27153:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>p,originalPathname:()=>A,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>c,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>P});var n={};s.r(n),s.d(n,{GET:()=>GET,POST:()=>POST,PUT:()=>PUT});var o=s(10884),r=s(16132),a=s(95798),i=s(15204);async function GET(e){try{let{searchParams:t}=new URL(e.url),s=t.get("lessonId"),n={};s&&(n.lessonId=s);let o=await i._.lessonNote.findMany({where:n,orderBy:{updatedAt:"desc"}}),r=o.map(e=>({id:e.id,lessonId:e.lessonId,lessonNumber:e.lessonNumber,lessonTitle:e.lessonTitle,title:e.title,content:e.content,section:e.section,createdAt:e.createdAt,updatedAt:e.updatedAt}));return a.Z.json({notes:r})}catch(e){return console.error("Error fetching lesson notes:",e),a.Z.json({error:"Failed to fetch lesson notes"},{status:500})}}async function POST(e){try{let t=await e.json(),{lessonId:s,lessonNumber:n,lessonTitle:o,title:r,content:l,section:d}=t;if(!s||!r||!l||!d)return a.Z.json({error:"Missing required fields"},{status:400});let u=await i._.lessonNote.create({data:{lessonId:s,lessonNumber:n,lessonTitle:o,title:r,content:l,section:d}}),c={id:u.id,lessonId:u.lessonId,lessonNumber:u.lessonNumber,lessonTitle:u.lessonTitle,title:u.title,content:u.content,section:u.section,createdAt:u.createdAt,updatedAt:u.updatedAt};return a.Z.json({note:c},{status:201})}catch(e){return console.error("Error creating lesson note:",e),a.Z.json({error:"Failed to create lesson note"},{status:500})}}async function PUT(e){try{let t=await e.json(),{id:s,title:n,content:o,section:r}=t;if(!s||!n||!o||!r)return a.Z.json({error:"Missing required fields"},{status:400});let l=await i._.lessonNote.update({where:{id:s},data:{title:n,content:o,section:r}}),d={id:l.id,lessonId:l.lessonId,lessonNumber:l.lessonNumber,lessonTitle:l.lessonTitle,title:l.title,content:l.content,section:l.section,createdAt:l.createdAt,updatedAt:l.updatedAt};return a.Z.json({note:d})}catch(e){return console.error("Error updating lesson note:",e),a.Z.json({error:"Failed to update lesson note"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/lesson-notes/route",pathname:"/api/lesson-notes",filename:"route",bundlePath:"app/api/lesson-notes/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\lesson-notes\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:u,serverHooks:c,headerHooks:p,staticGenerationBailout:P}=l,A="/api/lesson-notes/route"},15204:(e,t,s)=>{s.d(t,{_:()=>r});var n=s(53524);let o=globalThis,r=o.prisma??new n.PrismaClient},16132:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[8557,5798],()=>__webpack_exec__(27153));module.exports=s})();