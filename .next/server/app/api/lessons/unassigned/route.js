"use strict";(()=>{var e={};e.id=9285,e.ids=[9285],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},63803:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>g,originalPathname:()=>m,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>q});var t={};s.r(t),s.d(t,{GET:()=>GET});var n=s(10884),o=s(16132),i=s(95798),u=s(15204),a=s(94020),c=s(8192);async function GET(e){try{let r=await (0,a.getServerSession)(c.L);if(!r?.user)return i.Z.json({error:"Unauthorized"},{status:401});let s=r.user.role;if("admin"!==s&&"instructor"!==s)return i.Z.json({error:"Forbidden. Admin or Instructor access required."},{status:403});let{searchParams:t}=new URL(e.url),n=t.get("excludeCourseId");if(!u._)return i.Z.json({error:"Database connection error"},{status:500});let o={};if(n&&(o.courseId={not:n}),"instructor"===s){let e=await u._.instructor.findUnique({where:{userId:r.user.id},include:{courses:{select:{courseId:!0}}}});if(e){let r=e.courses.map(e=>e.courseId);o.courseId={notIn:n?[...r,n]:r}}}let p=await u._.lesson.findMany({where:o,orderBy:{number:"asc"},include:{course:{select:{id:!0,title:!0}},_count:{select:{exercises:!0}}}});return i.Z.json({lessons:p})}catch(e){return console.error("Error fetching available lessons:",e),i.Z.json({error:"Failed to fetch lessons"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/lessons/unassigned/route",pathname:"/api/lessons/unassigned",filename:"route",bundlePath:"app/api/lessons/unassigned/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\lessons\\unassigned\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:x,headerHooks:g,staticGenerationBailout:q}=p,m="/api/lessons/unassigned/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[657,8557,5798,7391,5226,8192],()=>__webpack_exec__(63803));module.exports=s})();