"use strict";(()=>{var e={};e.id=2787,e.ids=[2787],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},28951:(e,i,t)=>{t.r(i),t.d(i,{headerHooks:()=>p,originalPathname:()=>P,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>m});var r={};t.r(r),t.d(r,{GET:()=>GET});var s=t(10884),n=t(16132),o=t(95798),a=t(15204);async function GET(e,{params:i}){try{let{id:e}=i;if(!a._)return o.Z.json({error:"Database connection error"},{status:500});let t=await a._.lesson.findUnique({where:{id:e},include:{course:{select:{id:!0,title:!0,isActive:!0}},exercises:{include:{rubric:{include:{criteriaMappings:{include:{criteria:!0}},levelMappings:{include:{level:!0}}}},_count:{select:{grades:!0,exerciseSubmissions:!0}}},orderBy:{title:"asc"}},quizQuestions:{orderBy:{order:"asc"}},_count:{select:{exercises:!0,quizQuestions:!0,quizAttempts:!0,grades:!0}}}});if(!t)return o.Z.json({error:"Lesson not found"},{status:404});let r={id:t.id,number:t.number,title:t.title,description:t.description,duration:t.duration,courseId:t.courseId,course:t.course,createdAt:t.createdAt,updatedAt:t.updatedAt,exercises:t.exercises.map(e=>({id:e.id,title:e.title,description:e.description,maxPoints:e.maxPoints,rubric:{id:e.rubric.id,name:e.rubric.name,description:e.rubric.description,totalPoints:e.rubric.totalPoints,criteria:e.rubric.criteriaMappings.map(e=>({id:e.criteria.id,name:e.criteria.name,description:e.criteria.description,weight:e.criteria.weight})),levels:e.rubric.levelMappings.map(e=>({id:e.level.id,name:e.level.name,description:e.level.description,points:e.level.points,color:e.level.color}))},submissionCount:e._count.exerciseSubmissions,gradeCount:e._count.grades})),quizQuestions:t.quizQuestions.map(e=>({id:e.id,question:e.question,options:e.options,correctAnswer:e.correctAnswer,explanation:e.explanation,order:e.order})),stats:{exerciseCount:t._count.exercises,quizQuestionCount:t._count.quizQuestions,quizAttemptCount:t._count.quizAttempts,gradeCount:t._count.grades}};return o.Z.json({lesson:r},{status:200})}catch(e){return console.error("Error fetching lesson:",e),o.Z.json({error:"Failed to fetch lesson"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/lessons/[id]/route",pathname:"/api/lessons/[id]",filename:"route",bundlePath:"app/api/lessons/[id]/route"},resolvedPagePath:"C:\\Users\\admin\\projects\\grading-app\\app\\api\\lessons\\[id]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:l,headerHooks:p,staticGenerationBailout:m}=u,P="/api/lessons/[id]/route"},15204:(e,i,t)=>{t.d(i,{_:()=>n});var r=t(53524);let s=globalThis,n=s.prisma??new r.PrismaClient},16132:(e,i)=>{var t;Object.defineProperty(i,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))}};var i=require("../../../../webpack-runtime.js");i.C(e);var __webpack_exec__=e=>i(i.s=e),t=i.X(0,[8557,5798],()=>__webpack_exec__(28951));module.exports=t})();