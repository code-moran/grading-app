(()=>{var e={};e.id=3177,e.ids=[3177],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},85574:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3528);let a=(0,r.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},50007:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3528);let a=(0,r.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},95433:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>g,tree:()=>c});var r=t(67096),a=t(16132),l=t(37284),d=t.n(l),n=t(32564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(s,i);let c=["",{children:["grades",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,46256)),"C:\\Users\\admin\\projects\\grading-app\\app\\grades\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66611)),"C:\\Users\\admin\\projects\\grading-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"C:\\Users\\admin\\projects\\grading-app\\app\\not-found.tsx"]}],o=["C:\\Users\\admin\\projects\\grading-app\\app\\grades\\page.tsx"],x="/grades/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/grades/page",pathname:"/grades",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},82554:(e,s,t)=>{Promise.resolve().then(t.bind(t,9643))},9643:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>GradesPage});var r=t(30784),a=t(9885),l=t(30869),d=t(85574),n=t(35256),i=t(50007),c=t(91672),o=t(78937),x=t(11440),m=t.n(x),g=t(98699);function GradesPage(){let[e,s]=(0,a.useState)([]),[t,x]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[u,j]=(0,a.useState)(null),[f,b]=(0,a.useState)("all"),[y,N]=(0,a.useState)("all"),fetchStudents=async()=>{try{let e=await fetch("/api/students");if(!e.ok)throw Error("Failed to fetch students");let t=await e.json();s(t.students)}catch(e){console.error("Error fetching students:",e),j("Failed to load students")}},fetchGrades=async()=>{try{let e=await fetch("/api/grades");if(!e.ok)throw Error("Failed to fetch grades");let s=await e.json();x(s.grades)}catch(e){console.error("Error fetching grades:",e),j("Failed to load grades")}};(0,a.useEffect)(()=>{let loadData=async()=>{p(!0),await Promise.all([fetchStudents(),fetchGrades()]),p(!1)};loadData()},[]);let v=t.filter(e=>{let s="all"===f||e.lessonId===f,t="all"===y||e.studentId===y;return s&&t}),getLessonTitle=e=>{let s=l.K.find(s=>s.id===e);return s?`Lesson ${s.number}: ${s.title}`:"Unknown Lesson"},getStudentName=s=>{let t=e.find(e=>e.id===s);return t?t.name:"Unknown Student"},getGradeColor=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"F":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=v.length>0?Math.round(v.reduce((e,s)=>e+s.percentage,0)/v.length):0,k={A:v.filter(e=>e.letterGrade.startsWith("A")).length,B:v.filter(e=>e.letterGrade.startsWith("B")).length,C:v.filter(e=>e.letterGrade.startsWith("C")).length,D:v.filter(e=>e.letterGrade.startsWith("D")).length,F:v.filter(e=>e.letterGrade.startsWith("F")).length};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Grades Overview"}),r.jsx("p",{className:"text-sm text-gray-600",children:"View and analyze student performance"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>{let s=e.map(e=>{let s=t.filter(s=>s.studentId===e.id),{bestGrade:r,bestPercentage:a,bestLetterGrade:d,averageGrade:n}=(0,g.DQ)(s);return{studentId:e.id,studentName:e.name,registrationNumber:e.registrationNumber,class:e.cohort?.name||"",bestGrade:r,bestPercentage:a,bestLetterGrade:d,totalExercises:l.K.reduce((e,s)=>e+s.exercises.length,0),completedExercises:s.length,averageGrade:n,grades:s.map(e=>{let s=l.K.find(s=>s.id===e.lessonId),t=s?.exercises.find(s=>s.id===e.exerciseId);return{lessonId:e.lessonId,lessonTitle:s?`Lesson ${s.number}: ${s.title}`:"Unknown Lesson",exerciseId:e.exerciseId,exerciseTitle:t?.title||"Unknown Exercise",points:e.totalPoints,maxPoints:t?.maxPoints||16,percentage:e.percentage,letterGrade:e.letterGrade}})}}),r=(0,g.zW)(s);(0,g.EZ)(r,"grades-export.csv")},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors duration-200 flex items-center",children:[r.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"Download Grades"]}),r.jsx(m(),{href:"/",className:"text-gray-600 hover:text-blue-600",children:"Back to Dashboard"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>j(null),className:"text-red-700 hover:text-red-900",children:"\xd7"})]})}),h&&(0,r.jsxs)("div",{className:"flex justify-center items-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading grades..."})]}),!h&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Lesson"}),(0,r.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All Lessons"}),l.K.map(e=>(0,r.jsxs)("option",{value:e.id,children:["Lesson ",e.number,": ",e.title]},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Student"}),(0,r.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All Students"}),e.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.registrationNumber,")"]},e.id))]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:r.jsx(n.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Grades"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:r.jsx(i.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Grade"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w,"%"]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:r.jsx(c.Z,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Students Graded"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(v.map(e=>e.studentId)).size})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:r.jsx(o.Z,{className:"h-6 w-6 text-orange-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lessons Covered"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(v.map(e=>e.lessonId)).size})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Distribution"}),r.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(k).map(([e,s])=>(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full text-lg font-bold ${getGradeColor(e)}`,children:e}),r.jsx("div",{className:"mt-2 text-sm text-gray-600",children:s})]},e))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Grades (",v.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lesson"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feedback"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:getStudentName(e.studentId)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:getLessonTitle(e.lessonId)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.totalPoints," / ",l.K.find(s=>s.id===e.lessonId)?.exercises[0]?.maxPoints||16]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getGradeColor(e.letterGrade)}`,children:e.letterGrade}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.percentage,"%)"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.feedback})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.gradedAt).toLocaleDateString()})]},e.id))})]})})]}),0===v.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No grades found"}),r.jsx("p",{className:"text-gray-600",children:"all"!==f||"all"!==y?"Try adjusting your filters.":"Start grading exercises to see results here."})]})]})]})]})}},46256:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>d,__esModule:()=>l,default:()=>i});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\admin\projects\grading-app\app\grades\page.tsx`),{__esModule:l,$$typeof:d}=a,n=a.default,i=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,6309,3782,8200,7505,869,8699],()=>__webpack_exec__(95433));module.exports=t})();